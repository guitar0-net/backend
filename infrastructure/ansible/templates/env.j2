# SPDX-FileCopyrightText: 2026 Andrey Kotlyar <guitar0.app@gmail.com>
#
# SPDX-License-Identifier: AGPL-3.0-or-later

{% set app_hosts = nginx_domains | map(attribute='server_name') | list %}
DEBUG=False
ENVIRONMENT={{ app_env }}
SECRET_KEY={{ secret_key }}
DATABASE_URL=postgres://{{ db_user }}:{{ db_password }}@db:5432/{{ db_name }}
ALLOWED_HOSTS={{ (app_hosts + ['127.0.0.1', 'localhost']) | to_json }}
CSRF_TRUSTED_ORIGINS={{ app_hosts | map('regex_replace', '^', 'https://') | list | to_json }}
GIT_SHA={{ lookup('env', 'GIT_SHA') | default('unknown', true) }}
